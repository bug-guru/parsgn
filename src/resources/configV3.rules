ConfigFile: Rule {Rule} {I};
Rule: {I} Token {I} ":" ExpressionList ";";

// Ignorable
I: WhiteSpace | SingleLineComment | MultiLineComment;

WhiteSpace: <#WHITESPACE {#WHITESPACE}>;

SingleLineComment: <"//" {#DEFINED, #EOL}>;

MultiLineComment: <"/*" {#DEFINED, "*/"}>;

Token: <#UNICODE_IDENTIFIER_START {#UNICODE_IDENTIFIER_PART}>;

Expression: AltGroup | RuleRef | CharType | String | Group | Repeat | Optional | Replace;

RuleRef: Token;

AltGroup: AltGroupItem {I} "|" {I} AltGroupItem {{I} "|" {I} AltGroupItem};

AltGroupItem: RuleRef | CharType | String | Sequence | Replace;

CharType: "#" Token; //TODO: list all possible char types

String: <"\"" {"\\\""->"\"" | "\\\\"->"\\" | #DEFINED, "\""}>;

Sequence: "(" ExpressionList ")";

Repeat: "{" ExpressionList ["," {I} Expression {I}] "}";

Optional: "[" ExpressionList "]";

ExpressionList: {I} Expression {{I} Expression} {I};

Replace: Expression "->" String;